<script>
$(document).ready(function() {
    $("#replyerrormsg").hide();
});
$(document).on("click", ".glyphicon-trash", function () {
    $("#modalinputpassword").val("");
    $("#modalinputpassword").focus();
     var replyid = $(this).data('id');
    //  console.log(replyid);
     var url = "{% url 'reply_delete' board.id 9999999999 %}?page={{page}}&searchStr={{searchStr}}"
     url = url.replace('9999999999', replyid);
     $("#modalpassword").on("submit", function(e){
        //  console.log("I'm In");
         var fd = $("#modalpassword").serialize();
         e.preventDefault();
         $.ajax({
             method: "POST",
             url: url,
             data:fd,
         }).done(function(msg){
            // console.log(msg);
            $("#myModal").modal("hide");
            if(msg.length>0){
                $("#replyerrormsg").html("");
                $("#replyerrormsg").append(msg).show("fast", function(){
                    setTimeout(function(){
                        $("#replyerrormsg").hide("fast");
                    },3000);
                });
            }else{
                location.reload();
            }
            
         }).fail(function(msg){
            
         });
     })
});

</script>
<div id="replyerrormsg" class="alert alert-danger" role="alert"></div>
<div>
{% for reply in replys %}
    <div class="row">
        <div class="col-sm-3">
            <b>{{ reply.name }}</b> ({{ reply.ipaddress }})
        </div>
        <div class="col-sm-7">
           {% autoescape off %} {{ reply.reply|linebreaks }} {% endautoescape %}
        </div>
        <div class="col-sm-2">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            <span class="glyphicon glyphicon-trash" aria-hidden="true" data-toggle="modal" data-target="#myModal" data-id="{{ reply.id }}"></span>
            <span class="glyphicon glyphicon-comment" aria-hidden="true"></span>
        </div>
    </div>
    <hr>
{% endfor %}
</div>
<div class="modal" id="myModal" role="dialog">
    <div class="modal-dialog">
      
      <form id="modalpassword" method="POST" action="">
          {% csrf_token %}
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">삭제하려면 비밀번호를 입력하세요.</h4>
        </div>
        <div class="modal-body">
          <input id="modalinputpassword" type="password" name="replyPassword">
        </div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-default">확인</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">취소</button>
        </div>
      </div>
      </form>
    </div>
  </div>